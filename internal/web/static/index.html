<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>KindaVM - Remote Control</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="header">
            <h1>KindaVM</h1>
            <div class="hostname" id="hostname"></div>
            <div class="header-controls">
                <button id="playControl" class="header-button play-button" title="Start video and capture control">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-play-icon lucide-play"
                    >
                        <path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z" />
                    </svg>
                </button>
                <button
                    id="stopControl"
                    class="header-button stop-button"
                    title="Stop video and release control"
                    disabled
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-square-icon lucide-square"
                    >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                    </svg>
                </button>
                <button id="keyboardToggle" class="header-button keyboard-button" title="Show keyboard controls">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-keyboard-icon lucide-keyboard"
                    >
                        <path d="M10 8h.01" />
                        <path d="M12 12h.01" />
                        <path d="M14 8h.01" />
                        <path d="M16 12h.01" />
                        <path d="M18 8h.01" />
                        <path d="M6 8h.01" />
                        <path d="M7 16h10" />
                        <path d="M8 12h.01" />
                        <rect width="20" height="16" x="2" y="4" rx="2" />
                    </svg>
                </button>
                <button id="settingsToggle" class="header-button settings-button" title="Video settings">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-settings-icon lucide-settings"
                    >
                        <path
                            d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"
                        />
                        <circle cx="12" cy="12" r="3" />
                    </svg>
                </button>
            </div>
        </div>

        <div class="keyboard-popup" id="keyboardPopup">
            <div class="popup-content">
                <div class="popup-header">
                    <h3>Keyboard Controls</h3>
                </div>

                <div class="system-controls">
                    <h4>System Controls</h4>
                    <div class="control-buttons">
                        <div class="control-button-group">
                            <label>Brightness:</label>
                            <div class="button-row">
                                <button id="brightnessDown" class="control-button" title="Brightness Down">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="lucide lucide-sun-dim-icon lucide-sun-dim"
                                    >
                                        <circle cx="12" cy="12" r="4" />
                                        <path d="M12 4h.01" />
                                        <path d="M20 12h.01" />
                                        <path d="M12 20h.01" />
                                        <path d="M4 12h.01" />
                                        <path d="M17.657 6.343h.01" />
                                        <path d="M17.657 17.657h.01" />
                                        <path d="M6.343 17.657h.01" />
                                        <path d="M6.343 6.343h.01" />
                                    </svg>
                                </button>
                                <button id="brightnessUp" class="control-button" title="Brightness Up">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="lucide lucide-sun-icon lucide-sun"
                                    >
                                        <circle cx="12" cy="12" r="4" />
                                        <path d="M12 2v2" />
                                        <path d="M12 20v2" />
                                        <path d="m4.93 4.93 1.41 1.41" />
                                        <path d="m17.66 17.66 1.41 1.41" />
                                        <path d="M2 12h2" />
                                        <path d="M20 12h2" />
                                        <path d="m6.34 17.66-1.41 1.41" />
                                        <path d="m19.07 4.93-1.41 1.41" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="control-button-group">
                            <label>Volume:</label>
                            <div class="button-row">
                                <button id="volumeDown" class="control-button" title="Volume Down">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="lucide lucide-volume1-icon lucide-volume-1"
                                    >
                                        <path
                                            d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"
                                        />
                                        <path d="M16 9a5 5 0 0 1 0 6" />
                                    </svg>
                                </button>
                                <button id="volumeUp" class="control-button" title="Volume Up">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="24"
                                        height="24"
                                        viewBox="0 0 24 24"
                                        fill="none"
                                        stroke="currentColor"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="lucide lucide-volume2-icon lucide-volume-2"
                                    >
                                        <path
                                            d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"
                                        />
                                        <path d="M16 9a5 5 0 0 1 0 6" />
                                        <path d="M19.364 18.364a9 9 0 0 0 0-12.728" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="keyboard-shortcuts">
                    <h4>Send Key Combination</h4>
                    <div class="shortcut-composer">
                        <div class="modifier-checkboxes">
                            <label><input type="checkbox" id="modCtrl" /> Ctrl</label>
                            <label><input type="checkbox" id="modShift" /> Shift</label>
                            <label><input type="checkbox" id="modAlt" /> Alt</label>
                            <label><input type="checkbox" id="modMeta" /> Meta/Cmd</label>
                        </div>
                        <div class="key-input-row">
                            <div class="key-input-group">
                                <label>Key:</label>
                                <input
                                    type="text"
                                    id="keyInput"
                                    maxlength="1"
                                    placeholder="a-z, 0-9"
                                    title="Enter a single character"
                                />
                            </div>
                            <span class="or-separator">or</span>
                            <div class="key-input-group">
                                <label>Special Key:</label>
                                <select id="specialKeySelect">
                                    <option value="">None</option>
                                    <option value="F1">F1</option>
                                    <option value="F2">F2</option>
                                    <option value="F3">F3</option>
                                    <option value="F4">F4</option>
                                    <option value="F5">F5</option>
                                    <option value="F6">F6</option>
                                    <option value="F7">F7</option>
                                    <option value="F8">F8</option>
                                    <option value="F9">F9</option>
                                    <option value="F10">F10</option>
                                    <option value="F11">F11</option>
                                    <option value="F12">F12</option>
                                    <option value="Tab">Tab</option>
                                    <option value="Enter">Enter</option>
                                    <option value="Escape">Escape</option>
                                    <option value="Backspace">Backspace</option>
                                    <option value="Delete">Delete</option>
                                    <option value="Insert">Insert</option>
                                    <option value="Home">Home</option>
                                    <option value="End">End</option>
                                    <option value="PageUp">Page Up</option>
                                    <option value="PageDown">Page Down</option>
                                    <option value="ArrowUp">Arrow Up</option>
                                    <option value="ArrowDown">Arrow Down</option>
                                    <option value="ArrowLeft">Arrow Left</option>
                                    <option value="ArrowRight">Arrow Right</option>
                                </select>
                            </div>
                        </div>
                        <button id="sendKeyCombo" class="send-combo-button">Send</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="keyboard-popup" id="settingsPopup">
            <div class="popup-content">
                <div class="popup-header">
                    <h3>Video Settings</h3>
                </div>

                <div class="video-settings">
                    <h4>Video Settings</h4>
                    <div class="settings-form">
                        <div class="setting-group">
                            <label for="qualitySetting">Quality (1-100):</label>
                            <div class="input-with-value">
                                <input type="range" id="qualitySetting" min="1" max="100" value="80" />
                                <span id="qualityValue">80</span>
                            </div>
                            <p class="setting-help">Higher quality = better image, more bandwidth</p>
                        </div>

                        <div class="setting-group">
                            <label for="fpsSetting">Desired FPS:</label>
                            <div class="input-with-value">
                                <input type="number" id="fpsSetting" min="1" max="60" />
                            </div>
                            <p class="setting-help">Leave empty for maximum FPS. Lower FPS reduces latency.</p>
                        </div>

                        <div class="settings-actions">
                            <button id="saveSettings" class="save-settings-button">Save Settings</button>
                            <button id="resetSettings" class="reset-settings-button">Reset to Defaults</button>
                        </div>
                        <p class="setting-note">Saving settings will restart the video stream if active</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-layout">
            <div class="control-area" id="controlArea">
                <img id="mjpegFeed" style="display: none; width: 100%; height: 100%; object-fit: contain" />
                <div class="placeholder" id="placeholder">
                    <div class="placeholder-content">
                        <h2>Click to Start Controlling</h2>
                        <p class="help-text">Press ESC to release keyboard and mouse</p>
                        <p class="help-text">Click Stop button to stop video stream</p>
                    </div>
                </div>
            </div>
        </div>

        <script src="app.js"></script>
    </body>
</html>
